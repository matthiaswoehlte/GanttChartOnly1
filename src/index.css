/* Gantt Chart Styles */

/* Layout tokens */
:root{
  --gantt-left-col: 20%;   /* resource table width */
  --gantt-row-h: 40px;
  --gantt-timeline-h: 56px;
  --gantt-header-h: 92px;  /* header min height in flow */
}

* { box-sizing: border-box; }
html, body, #app, #gantt-root { height: 100%; }
body { 
  background: #0f172a; 
  color: #e5e7eb; 
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
}

/* Header in flow, not overlay; right column stacked controls + timeline */
#gantt-root { display:flex; flex-direction:column; }

#gantt-header {
  position: sticky; top: 0; z-index: 20;     /* above content, aber im Flow */
  background: rgba(15,23,42,.96);
  border-bottom: 1px solid #374151;
}
#gantt-header-grid{
  display: grid;
  grid-template-columns: var(--gantt-left-col) 1fr; /* 20% / 80% */
  align-items: center;
  column-gap: 0;
  padding: 8px 16px 6px 0;   /* kein left padding */
  min-height: var(--gantt-header-h);
}
#gantt-title { padding-left: 12px; }
#gantt-header-right { display:flex; flex-direction:column; gap:6px; position: static; } /* KEIN absolute/fixed */

#gantt-controls { display:flex; flex-wrap:wrap; align-items:center; gap:12px; }

/* VISIBLE timeline row */
#gantt-timeline-scroll{
  height: var(--gantt-timeline-h);
  overflow-x:auto; overflow-y:hidden;
  scrollbar-width:none; -ms-overflow-style:none;
}
#gantt-timeline-scroll::-webkit-scrollbar{ display:none; }
#gantt-timeline-content{
  height: var(--gantt-timeline-h);
  position: relative;
  margin: 0 !important; padding: 0 !important; transform: none !important;
}

/* Body layout */
#gantt-body-scroll{
  flex: 1 1 auto;
  overflow-y:auto; overflow-x:hidden;
  background:#0b1220;
}
#gantt-body-row{ display:flex; min-height:100%; }

#gantt-table-left{
  flex:0 0 var(--gantt-left-col);
  width:var(--gantt-left-col);
  overflow-x:hidden;
  border-right:1px solid #374151;
  background:#0f172a;
}
#gantt-chart-scroll{
  flex:1 1 auto;
  overflow-x:auto; overflow-y:hidden;
  border-left:0; /* Divider nur auf der Tabelle */
  background:#0f172a;
}

/* Remove hidden gutters that push content */
#gantt-timeline-scroll, #gantt-timeline-content,
#gantt-chart-scroll,    #gantt-chart-content { margin-left:0 !important; padding-left:0 !important; }

/* Alternating rows IN THE CHART BODY */
#gantt-chart-content{ position:relative; display:block; }
.gantt-row{
  position: relative;
  height: var(--gantt-row-h);
  display: block;
  width: 100%;
  /* alternating background */
  background: #1F2937;
}
.gantt-row:nth-child(odd) { background: #374151; }

/* Bars live inside each row */
.gantt-row-bars{
  position: relative;  /* NOT absolute; keeps bars local */
  height: 100%;
}
.gantt-bar{
  position: absolute;  /* left & width in px, top = row padding */
  top: 6px;            /* or 0; keep consistent */
  height: calc(100% - 12px);
  border-radius: 6px;
}

/* Resource table rows */
.row{ height:var(--gantt-row-h); display:flex; align-items:center; }
.row.even{ background:#1F2937; }
.row.odd { background:#374151; }

/* Tick label helpers (to avoid edge clipping) */
.gantt-tick--first{ transform:translateX(0)!important; text-align:left; }
.gantt-tick--last { transform:translateX(-100%)!important; text-align:right; }

/* Z-Index & stacking contexts */
#gantt-chart-scroll, #gantt-chart-content { position:relative; z-index: 1; }
#gantt-header { z-index: 20; }

/* Sticky proxy scroller that is always visible in viewport */
#gantt-hscroll-proxy{
  position: sticky; bottom: 0; z-index: 30;
  height: 14px;                 /* only the scrollbar is visible */
  overflow-x: auto; overflow-y: hidden;
  background: transparent;
}
#gantt-hscroll-track{ width: var(--gantt-content-w); height: 1px; }

/* Ensure the real scrollers have no transforms that could desync */
#gantt-chart-scroll, #gantt-chart-content,
#gantt-timeline-scroll, #gantt-timeline-content { transform: none !important; }

/* === FULL-WIDTH STRIPES IN THE BAR AREA ===
   Draw stripes once as an absolute overlay that spans the WHOLE content width. */
#gantt-chart-content{ position: relative; }
#gantt-bg-grid{
  position: absolute; inset: 0; pointer-events: none; z-index: 0;
  background: repeating-linear-gradient(
    to bottom,
    #1F2937 0 calc(var(--gantt-row-h)),
    #374151 calc(var(--gantt-row-h)) calc(var(--gantt-row-h)*2)
  );
}
/* Bars above the grid */
.gantt-row, .gantt-row-bars{ position: relative; }
.gantt-row{ height: var(--gantt-row-h); }
.gantt-row-bars{ height: 100%; z-index: 1; }

/* A) Alternating rows LEFT = RIGHT (single source of truth) */
#gantt-table-left .table-row,
#gantt-chart-content .gantt-row {
  height: var(--gantt-row-h);
  background: transparent; /* Grid overlay handles stripes */
  border-top: 0;
  border-bottom: 0;
}

/* Keep table row backgrounds for left side */
#gantt-table-left .table-row { background: #1F2937; }
#gantt-table-left .table-row:nth-child(odd) { background: #374151; }

/* Only ONE vertical divider: right edge of table */
#gantt-table-left { border-right: 1px solid #374151; }
#gantt-chart-scroll { border-left: 0; }

/* B) Bars render INSIDE each row with centered labels */
.gantt-row { position: relative; }
.gantt-row-bars { position: relative; width: 100%; height: 100%; overflow: visible; }
.gantt-bar {
  position: absolute;
  top: 6px;
  height: calc(100% - 12px);
  border-radius: 6px;
  overflow: hidden;
}

/* IMPORTANT: no transforms on chart content or ancestors */
#gantt-chart-content,
#gantt-chart-scroll { transform: none !important; }

.gantt-bar-label {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  max-width: calc(100% - 10px);
  padding: 0 5px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  pointer-events: none;
  font-weight: 600;
  font-size: 12px;
  color: white;
}

.gantt-bar--short .gantt-bar-label {
  display: none;
}

/* E) Vertical scrolling: ONE container */
#gantt-body-scroll { overflow-y: auto; }
#gantt-table-left, #gantt-chart-scroll { overflow-y: hidden; }

/* Task bar styles */
.task-bar {
  position: absolute;
  height: 32px;
  border-radius: 4px;
  cursor: move;
  user-select: none;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 500;
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

.task-bar:hover {
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
}

.task-bar.dragging {
  z-index: 1000;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
}

/* Resize handles */
.resize-handle {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 8px;
  cursor: col-resize;
  opacity: 0;
  transition: opacity 0.2s;
}

.resize-handle.left {
  left: 0;
}

.resize-handle.right {
  right: 0;
}

.task-bar:hover .resize-handle {
  opacity: 1;
}

/* Controls styling */
#gantt-controls label {
  font-size: 14px;
  color: #d1d5db;
  font-weight: 500;
}

#gantt-controls select,
#gantt-controls input {
  padding: 6px 12px;
  background: #374151;
  color: #e5e7eb;
  border: 1px solid #4b5563;
  border-radius: 4px;
  font-size: 14px;
}

#gantt-controls select:focus,
#gantt-controls input:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
}

#gantt-date-label {
  font-size: 14px;
  color: #9ca3af;
  font-weight: 500;
}

/* Timeline ruler styles */
.timeline-tick {
  position: absolute;
  top: 0;
  height: 100%;
  border-left: 1px solid #4b5563;
}

.timeline-tick-label {
  position: absolute;
  top: 8px;
  font-size: 12px;
  color: #9ca3af;
  font-weight: 500;
}

.timeline-minor-tick {
  position: absolute;
  top: 0;
  height: 24px;
  border-left: 1px solid #374151;
}