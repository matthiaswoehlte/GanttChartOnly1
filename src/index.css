@tailwind base;
@tailwind components;
@tailwind utilities;

/* box model */
* { box-sizing: border-box; }

/* Global layout - enforce 100% height chain */
html, body, #root, #gantt-root {
  height: 100%;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Apply box-sizing globally */
* { box-sizing: border-box; }

/* The whole timeline content can be nudged by a CSS var */
#gantt-timeline-content { position:relative; transform: translateX(var(--gantt-xfix, 0px)); }

/* No hidden left padding/margins on scrollers/contents */
#gantt-timeline-scroll, #gantt-timeline-content,
#gantt-chart-scroll,    #gantt-chart-content { padding-left:0; margin-left:0; }

/* Only the table draws the divider (avoid double lines) */
#gantt-chart-scroll { border-left:0; }
#gantt-table-left   { border-right:1px solid #374151; }

/* (Edge labels helpers) */
.gantt-tick--first { transform: translateX(0) !important; text-align:left; }
.gantt-tick--last  { transform: translateX(-100%) !important; text-align:right; }

/* Single token = 20% of the viewport */
:root { --gantt-left-col: 20vw; }

/* Header grid uses EXACTLY the table width from a CSS var we set in JS */
#gantt-header { position:sticky; top:0; z-index:10; background:rgba(15,23,42,.95); border-bottom:1px solid #374151; }

/* Header grid: first column = 20vw, no gaps */
#gantt-header-grid {
  display: grid;
  grid-template-columns: var(--gantt-left-col) 1fr;  /* 20% / 80% */
  column-gap: 0 !important;
  gap: 0 !important;
  align-items: center;
  position: relative;         /* anchor for vrule */
  padding: 12px 16px 4px 0;
  padding-left: 0 !important;
  margin-left: 0 !important;
}

/* Make the title box only 40% as wide as its own (20%) column */
#gantt-title {
  width: 40% !important;            /* the requested shrink */
  max-width: 40% !important;
  display: block;
  justify-self: start;              /* stay left-aligned inside the column */
  padding-left: 12px;
  padding-right: 0;
  margin: 0;
  overflow: hidden;
  border-right: 0 !important;       /* divider should NOT live here */
}

/* Keep the H2 text tidy inside the smaller box */
#gantt-title > h2 {
  margin: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Header right block starts exactly at the boundary (no left gutter) */
#gantt-header-right {
  grid-column: 2;
  margin-left: 0 !important;
  padding-left: 0 !important;
  border-left: 1px solid #374151;   /* the vertical divider at the 20% boundary */
}

/* controls stay on one row */
#gantt-controls { display:flex; flex-wrap:wrap; align-items:center; gap:12px; }
#gantt-controls .ctrl { display:flex; align-items:center; gap:6px; }
#gantt-controls select,
#gantt-controls input[type="month"],
#gantt-controls input[type="date"] {
  height:32px; line-height:32px; padding:0 10px; border:1px solid #4B5563; border-radius:6px;
  background:#111827; color:#E5E7EB; appearance:none; -webkit-appearance:none;
}

/* Timeline scrollable containment + hide scrollbar */
#gantt-header-right { overflow: hidden; }
#gantt-timeline-scroll {
  overflow-x: auto !important;
  overflow-y: hidden;
  width: 100%;
  scrollbar-width: none;
  -ms-overflow-style: none;
}
#gantt-timeline-scroll::-webkit-scrollbar { display: none; }

/* Safety to prevent page-level X-scroll */
#root, #gantt-root, body { overflow-x: hidden; }

/* timeline & chart contents must start at x=0 (no left padding/margins) */
#gantt-timeline-scroll, #gantt-chart-scroll { padding-left:0; }
#gantt-timeline-content, #gantt-chart-content { margin-left:0 !important; padding-left:0 !important; }

/* Timeline content can be nudged by CSS var --gantt-x0 (default 0) */
#gantt-timeline-content {
  position: relative;
  transform: translateX(var(--gantt-xfix, 0px));
}

/* The zero anchor marks x=0 for measurement */
#gantt-timeline-zero {
  position: absolute;
  left: 0; top: 0; bottom: 0;
  width: 0;           /* no visual width */
  pointer-events: none;
}

#gantt-chart-content {
  transform: none;
}

/* header overlay: draw the same divider in the header for easy visual check */
#gantt-header-vrule {
  position:absolute; left: var(--gantt-table-w, 280px); top:0; bottom:0;
  width:1px; background:#374151; pointer-events:none; z-index:5;
}

/* first/last tick label alignment helpers */
.gantt-tick--first { transform: translateX(0) !important; text-align:left; }
.gantt-tick--last  { transform: translateX(-100%) !important; text-align:right; }

/* Remove any margin-based centering on timeline labels */
#gantt-timeline-content .gantt-tick--label{
  margin-left: 0 !important;
  white-space: nowrap;
  pointer-events: none;
  font-size: 12px;
  color: #cbd5e1;
}

/* Gantt Chart Layout */
#gantt-root {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: #0f172a;
  color: #e5e7eb;
}

#gantt-body-scroll {
  position: relative;
  flex: 1 1 auto;
  overflow-y: auto;        /* ONLY vertical scrollbar lives here */
  overflow-x: hidden;
  max-height: calc(100vh - var(--gantt-header-h, 88px) - var(--gantt-footer-h, 0px));
}

#gantt-body-row {
  display: flex;
  min-height: 100%;
}

/* Body left table: fixed 20vw, same divider, no hidden gutters */
#gantt-table-left {
  box-sizing: border-box;
  flex: 0 0 var(--gantt-left-col);
  width: var(--gantt-left-col);
  min-width: var(--gantt-left-col);
  border-right: 1px solid #374151;  /* align visual divider with header */
  margin-left: 0 !important;
  padding-left: 0 !important;
}

/* Zero-offset: scrollable contents must start at x=0 */
#gantt-timeline-content,
#gantt-chart-content {
  position: relative;
  margin-left: 0 !important;
  padding-left: 0 !important;
  transform: none;
}

#gantt-controls label { font-size: 0.9rem; color: #cbd5e1; }

#gantt-chart-scroll {
  position: relative;
  flex: 1 1 auto;
  padding-bottom: 16px;
}

#gantt-timeline-scroll {
  overflow-x: auto;
  overflow-y: hidden;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

#gantt-timeline-scroll::-webkit-scrollbar {
  display: none;     /* timeline scrollbar hidden */
}

#gantt-chart-scroll::-webkit-scrollbar {
  height: 12px;      /* chart scrollbar visible */
}

#gantt-chart-scroll::-webkit-scrollbar-track {
  background-color: #1F2937;
}

#gantt-chart-scroll::-webkit-scrollbar-thumb {
  background-color: #4B5563;
  border-radius: 4px;
}

#gantt-chart-scroll::-webkit-scrollbar-thumb:hover {
  background-color: #6B7280;
}

#gantt-chart-content,
#gantt-timeline-content,
#gantt-hscroll-inner {
  display: block;
  flex: 0 0 auto;     /* prevent flex shrink */
  margin: 0;
  padding: 0;
  border: 0;
  width: var(--gantt-content-w, 100%);
  min-width: var(--gantt-content-w, 100%);
  transform: none;
}

#gantt-hscroll-proxy {
  position: sticky;
  bottom: 0;
  z-index: 9;
  height: 16px;
  background: rgba(2, 6, 23, 0.85);
  border-top: 1px solid #374151;
  overflow-x: auto;
  overflow-y: hidden;       /* visible sticky scrollbar */
}

#gantt-hscroll-inner {
  height: 1px;
}

#gantt-footer {
  background: #0f172a;
  border-top: 1px solid #374151;
  padding: 8px 16px;
}

/* Row styling */
.row {
  height: 40px;
}

.row.even {
  background: #1F2937;
}

.row.odd {
  background: #374151;
}

/* Task bar styling */
.task-bar {
  transition: box-shadow 0.2s ease;
}

.task-bar:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.task-bar.dragging {
  z-index: 1000 !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
}

/* Resize cursor areas */
.resize-handle {
  position: absolute;
  top: 0;
  height: 100%;
  width: 8px;
  cursor: col-resize;
  z-index: 10;
}

.resize-handle.left {
  left: 0;
}

.resize-handle.right {
  right: 0;
}