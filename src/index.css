/* Gantt Chart Styles */

/* A) Base font & reset (fix font fallback) */
@supports (font-variation-settings: normal) {
  html, body, button, input, select, textarea {
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI",
                 Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
  }
}
html, body, #root, #gantt-root { height: 100%; }
body { background:#0f172a; color:#e5e7eb; }
* { box-sizing: border-box; }

/* B) Layout tokens */
:root{
  --gantt-left-col: 20%;   /* resource table width */
  --gantt-row-h: 40px;
  --gantt-timeline-h: 56px;
  --gantt-header-h: 92px;  /* header min height in flow */
}

/* C) Header in flow, not overlay; right column stacked controls + timeline */
#gantt-root { display:flex; flex-direction:column; min-height:100%; }

#gantt-header {
  position: sticky; top: 0; z-index: 20;     /* above content, aber im Flow */
  background: rgba(15,23,42,.96);
  border-bottom: 1px solid #374151;
}
#gantt-header-grid{
  display: grid;
  grid-template-columns: var(--gantt-left-col) 1fr; /* 20% / 80% */
  align-items: center;
  column-gap: 0;
  padding: 8px 16px 6px 0;   /* kein left padding */
  min-height: var(--gantt-header-h);
}
#gantt-title { padding-left: 12px; }
#gantt-header-right { display:flex; flex-direction:column; gap:6px; position: static; } /* KEIN absolute/fixed */

#gantt-controls { display:flex; flex-wrap:wrap; align-items:center; gap:12px; }

/* Timeline row: fixed height, no vertical squeeze */
#gantt-timeline-scroll{
  height: var(--gantt-timeline-h);
  overflow-x:auto; overflow-y:hidden;
  scrollbar-width:none; -ms-overflow-style:none;
}
#gantt-timeline-scroll::-webkit-scrollbar{ display:none; }
#gantt-timeline-content{
  height: var(--gantt-timeline-h);
  margin: 0 !important; padding: 0 !important; transform: none !important;
  position: relative;
}

/* D) Body unter dem Header, dunkler Hintergrund, Spalten 20% / 80% */
#gantt-body-scroll{
  flex: 1 1 auto;
  overflow-y:auto; overflow-x:hidden;
  background:#0b1220;
}
#gantt-body-row{ display:flex; min-height:100%; }

#gantt-table-left{
  flex:0 0 var(--gantt-left-col);
  width:var(--gantt-left-col);
  overflow-x:hidden;
  border-right:1px solid #374151;
  background:#0f172a;
}
#gantt-chart-scroll{
  flex:1 1 auto;
  overflow-x:auto; overflow-y:hidden;
  border-left:0; /* Divider nur auf der Tabelle */
  background:#0f172a;
}

/* Keine versteckten Gutters, die die Timeline nach rechts schieben */
#gantt-timeline-scroll, #gantt-timeline-content,
#gantt-chart-scroll,    #gantt-chart-content { margin-left:0 !important; padding-left:0 !important; }

/* Reihenfärbung */
.row{ height:var(--gantt-row-h); display:flex; align-items:center; }
.row.even{ background:#1F2937; }
.row.odd { background:#374151; }

/* E) Z-Index & stacking contexts (Bars NIE hinter Controls) */
#gantt-chart-scroll, #gantt-chart-content { position:relative; z-index: 1; }
#gantt-header { z-index: 20; } /* höher als 1, aber im Flow → kein „darunter-kleben" der Bars */

/* D) TIMELINE TICKS — consistent origin & labels */
.gantt-tick--first{ transform:translateX(0)!important; text-align:left; }
.gantt-tick--last { transform:translateX(-100%)!important; text-align:right; }

/* Gantt row structure for bars inside rows */
#gantt-chart-content{ position:relative; }  /* but NOT the bars container */
.gantt-row{
  position: relative;
  height: var(--gantt-row-h);
  display: block;
}
.gantt-row-track{      /* the dark strip background, optional x0 marker */
  position:absolute; inset:0;
  pointer-events:none;
}
.gantt-row-bars{       /* THIS is where bars live, per-row */
  position: relative;  /* NOT absolute; keeps bars local */
  height: 100%;
  overflow: visible;
}
.gantt-bar{
  position: absolute;  /* left & width in px, top = row padding */
  top: 6px;            /* or 0; keep consistent */
  height: calc(100% - 12px);
  border-radius: 6px;
}

/* remove any global absolute overlay for all bars */
#all-bars-overlay, .bars-overlay, .gantt-bars-overlay { display:none !important; }

/* ROW HEIGHT SYNC — table & chart must use the SAME --gantt-row-h */
#gantt-table-left .row, #gantt-chart-content .gantt-row{ height: var(--gantt-row-h); }

/* Task bar styles */
.task-bar {
  position: absolute;
  height: 32px;
  border-radius: 4px;
  cursor: move;
  user-select: none;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 500;
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

.task-bar:hover {
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
}

.task-bar.dragging {
  z-index: 1000;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
}

/* Resize handles */
.resize-handle {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 8px;
  cursor: col-resize;
  opacity: 0;
  transition: opacity 0.2s;
}

.resize-handle.left {
  left: 0;
}

.resize-handle.right {
  right: 0;
}

.task-bar:hover .resize-handle {
  opacity: 1;
}

/* Controls styling */
#gantt-controls label {
  font-size: 14px;
  color: #d1d5db;
  font-weight: 500;
}

#gantt-controls select,
#gantt-controls input {
  padding: 6px 12px;
  background: #374151;
  color: #e5e7eb;
  border: 1px solid #4b5563;
  border-radius: 4px;
  font-size: 14px;
}

#gantt-controls select:focus,
#gantt-controls input:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
}

#gantt-date-label {
  font-size: 14px;
  color: #9ca3af;
  font-weight: 500;
}

/* Timeline ruler styles */
.timeline-tick {
  position: absolute;
  top: 0;
  height: 100%;
  border-left: 1px solid #4b5563;
}

.timeline-tick-label {
  position: absolute;
  top: 8px;
  font-size: 12px;
  color: #9ca3af;
  font-weight: 500;
}

.timeline-minor-tick {
  position: absolute;
  top: 0;
  height: 24px;
  border-left: 1px solid #374151;
}